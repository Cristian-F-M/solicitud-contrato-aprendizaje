const asNavSettings=document.querySelectorAll(".nav-settings ul li a"),containers=document.querySelectorAll(".main-settings div"),mailContent=document.getElementById("mail-content"),inputs=document.querySelectorAll("input, textarea"),previewCv=document.getElementById("preview-cv"),inputCv=document.getElementById("input-cv"),dropsDown=document.querySelectorAll(".drop-down h3"),isPassword=document.querySelectorAll(".i-password"),iMoreOptions=document.querySelectorAll('[data-name="more-options"]'),SVG_EYES_PASSWORD={EYE:'<svg width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-eye" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 12a2 2 0 1 0 4 0 2 2 0 0 0-4 0"/><path d="M21 12c-2.4 4-5.4 6-9 6-3.6 0-6.6-2-9-6 2.4-4 5.4-6 9-6 3.6 0 6.6 2 9 6"/></svg>',EYE_OFF:'<svg width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="icon icon-tabler icons-tabler-outline icon-tabler-eye-off" viewBox="0 0 24 24"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10.585 10.587a2 2 0 0 0 2.829 2.828"/><path d="M16.681 16.673A8.717 8.717 0 0 1 12 18c-3.6 0-6.6-2-9-6 1.272-2.12 2.712-3.678 4.32-4.674m2.86-1.146A9.055 9.055 0 0 1 12 6c3.6 0 6.6 2 9 6-.666 1.11-1.379 2.067-2.138 2.87M3 3l18 18"/></svg>'};function createObjectCv(e){let t=URL.createObjectURL(e.target.files[0]),o=document.createElement("object");return o.setAttribute("type","application/pdf"),o.id="object-preview-cv",o.setAttribute("data",t),o}function toggleDropdownDepartament(e,t){let o=e.querySelector(".container-cities"),n=getStyleComputed(o,"margin-top")+o.offsetHeight+t.offsetHeight;e.classList.toggle("show"),e.style.maxHeight=e.classList.contains("show")?`${n}px`:"50px"}function toggleDropdownCity(e,t){let o=e.querySelector(".container-emails"),n=e.closest(".departament"),r=t.offsetHeight+getStyleComputed(o,"margin-top")+o.offsetHeight,i=n.querySelector(".container-cities"),s=getStyleComputed(i,"margin-top"),a=n.querySelector("h3");e.classList.toggle("show"),e.style.maxHeight=e.classList.contains("show")?`${r}px`:"50px",n.style.maxHeight=`${r+i.offsetHeight+s+a.offsetHeight}px`}function getStyleComputed(e,t){return parseInt(window.getComputedStyle(e,null).getPropertyValue(t))}function resetDropdownsLocation(e){let t=e.parentNode,o=e.classList.contains("departament")?"departament":"city";t.querySelectorAll(`.drop-down.${o}`).forEach((t=>{t!==e&&(t.classList.remove("show"),t.style.maxHeight="50px")}))}function resetAllDropdowns(e){dropsDown.forEach((t=>{let o=t.parentNode;o!==e&&(o.classList.remove("show"),o.style.maxHeight="50px")}))}function getNextDropdowns(e,t){let o=[],n=e.nextElementSibling;for(;n;)n.classList.contains(t)&&o.push(n),n=n.nextElementSibling;return o}asNavSettings.forEach((e=>{let t=document.querySelector(`.main-settings div[data-name="${e.dataset.name}"]`);e.addEventListener("click",(o=>{o.preventDefault(),containers.forEach((e=>{e.removeAttribute("show")})),asNavSettings.forEach((e=>{e.removeAttribute("show")})),t.setAttribute("show",""),e.setAttribute("show",""),setTimeout((()=>{let t=new URLSearchParams(window.location.search);t.set("tag",e.dataset.name.toLowerCase());let o=`${window.location.origin}${window.location.pathname}?${t.toString()}`;history.pushState({},"",o)}),0)}))})),inputs.forEach((e=>{let t=document.querySelector(`label[for="${e.id}"]`);e.required&&(t.innerHTML+=' <span class="required">*</span>')})),inputCv.addEventListener("change",(e=>{let t=createObjectCv(e),o=previewCv.querySelector("span"),n=previewCv.querySelector("#file_user");previewCv.classList.add("object"),previewCv.appendChild(t),o&&o.remove(),n&&n.remove()})),dropsDown.forEach((e=>{let t=e.parentNode;e.addEventListener("click",(()=>{resetDropdownsLocation(t),t.classList.contains("departament")?(resetAllDropdowns(t),toggleDropdownDepartament(t,e)):t.classList.contains("city")&&toggleDropdownCity(t,e)}))})),isPassword.forEach((e=>{e.addEventListener("click",(()=>{let t=e.previousElementSibling,o=t.getAttribute("type");e.innerHTML="password"===o?SVG_EYES_PASSWORD.EYE_OFF:SVG_EYES_PASSWORD.EYE,t.setAttribute("type","password"===o?"text":"password")}))})),iMoreOptions.forEach((e=>{e.addEventListener("click",(()=>{e.nextElementSibling.classList.toggle("show")}))})),document.addEventListener("click",(e=>{let t=e.target;iMoreOptions.forEach((e=>{let o=e.nextElementSibling,n=e.querySelector("svg");t!=e&&t!=o&&t!=n&&o.classList.remove("show")}))}));